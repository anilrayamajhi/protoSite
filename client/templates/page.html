<nav class="navbar navbar-default navbar-custom affix navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">

      <!-- Mobile Nav Button -->
      <button ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a ui-sref="home" class="navbar-brand">{{singlePCtrl.page.name}}</a>
    </div>

    <div class="collapse navbar-collapse" uib-collapse="navCollapsed">
      <!-- Main nav links -->
      <ul class="nav navbar-nav navbar-right">
        <li><a ui-sref="home">Home</a></li>
        <li><a ui-sref="cars">Browse</a></li>
        <li><a class="underlined-example" href="#contacts">Contacts</a></li>
      </ul>

      <!-- Filter Car List, only on 'cars' state -->
      <form ng-show="main.$state.includes('cars')" class="navbar-form navbar-right">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Filter List" ng-model="carFilter">
          <div class="input-group-btn">
            <button ng-click="carFilter = ''" ng-disabled="!carFilter" class="btn btn-default" type="button">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</nav>


<!-- Header -->
<header>
    <div class="container">
        <div class="intro-text">
            <div class="intro-lead-in">An Online Car Convention</div>
            <div class="intro-heading">The Car Repo</div>
            <a ui-sref="cars" class="page-scroll btn btn-xl">Browse Dream Cars</a>
        </div>
    </div>
</header>

<div class="container">
  <div class="row">

    {{3+4}}
    <p class="hidden">{{singlePCtrl.page.location.display_address[0]}}</p>
    <p class="">{{singlePCtrl.page.name}}</p>
  </div>
  <button class="hiddent btn btn-info" type="button" name="button">Map View</button><br><br>
  <div class="map" style="height: 500px" id="map"></div>
</div>

<script>
  var map;
  var geoLocation;
  var name;
  $('body').on('click', '.hiddent', function(evt){
    geoLocation= $('.hidden').text();
    $('#map').toggleClass('map');
    console.log(geoLocation);
    getAddress(geoLocation);
})

  function getAddress(searchAddress) {
    $.get('https://maps.googleapis.com/maps/api/geocode/json?address='+searchAddress)
    .success(function(data) {
      // console.log("Latitude:", data.results[0].geometry.location.lat)
      // console.log("Longitute:", data.results[0].geometry.location.lng)

      var geocodedAddress =  data.results[0].geometry.location
      // console.log(geocodedAddress);
      // console.log(data.results[0].geometry.location);
      myMap = new google.maps.Map(document.getElementById('map'), {
        center: geocodedAddress,
        zoom: 17,
        content: 'Ganey'
      });
      var marker = new google.maps.Marker({
        position: geocodedAddress,
        map: myMap,
      });
      var contentString = "<h1>"++"</h1>"
      var infowindow = new google.maps.InfoWindow({
         content: contentString
       });
      marker.addListener('click', function() {
        infowindow.open(map, marker);
  });
    })
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGpU5i66YurDTpGk9tb9DLhoBGKPzxUBE&callback=getAddress"
    async defer></script>
